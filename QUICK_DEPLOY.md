# ðŸš€ Quick Deploy Reference - LoopJS

**Last Updated:** October 25, 2025

---

## âœ… What's Already Set Up

### 1. MongoDB Atlas âœ…
- **Connection String:**
  ```
  mongodb+srv://chrisdemonxxx_db_user:Demon%4046@cluster0.1vs04ow.mongodb.net/loopjs?retryWrites=true&w=majority&appName=Cluster0
  ```
- Database: `loopjs`
- Network Access: Open (0.0.0.0/0)

### 2. Configuration Files âœ…
- âœ… `backend/render.yaml` - Render deployment config
- âœ… `frontend/vercel.json` - Vercel deployment config
- âœ… `backend/.env.production` - Updated with MongoDB Atlas

---

## ðŸŽ¯ Next Steps - Deploy to Production

### Step 1: Deploy Backend to Render (10-15 min)

1. **Create Render Account:**
   - Go to [render.com](https://render.com)
   - Sign up with GitHub

2. **Create New Web Service:**
   - Click **"New +"** â†’ **"Blueprint"**
   - Connect your GitHub repository
   - Render will auto-detect `backend/render.yaml`

3. **Set Required Environment Variables:**
   In Render dashboard, add these variables:

   | Variable | Value | Notes |
   |----------|-------|-------|
   | `MONGODB_URI` | `mongodb+srv://chrisdemonxxx_db_user:Demon%4046@cluster0.1vs04ow.mongodb.net/loopjs?retryWrites=true&w=majority&appName=Cluster0` | Copy this exactly |
   | `ALLOWED_ORIGINS` | Leave empty for now | Will update after Vercel deployment |

   > Note: `JWT_SECRET` and `SESSION_SECRET` are auto-generated by Render

4. **Deploy:**
   - Click **"Create Web Service"**
   - Wait 5-10 minutes for deployment
   - Copy your backend URL: `https://YOUR-SERVICE.onrender.com`

5. **Test Backend:**
   ```bash
   curl https://YOUR-SERVICE.onrender.com/health
   ```
   Should return: `{"status":"healthy",...}`

---

### Step 2: Deploy Frontend to Vercel (10-15 min)

1. **Create Vercel Account:**
   - Go to [vercel.com](https://vercel.com)
   - Sign up with GitHub

2. **Import Project:**
   - Click **"Add New..."** â†’ **"Project"**
   - Select your `loopjs` repository
   - Click **"Import"**

3. **Configure Build Settings:**
   - **Framework Preset:** Vite
   - **Root Directory:** `frontend`
   - **Build Command:** `npm run build`
   - **Output Directory:** `dist`
   - **Install Command:** `npm install --legacy-peer-deps`

4. **Add Environment Variables:**

   | Variable | Value |
   |----------|-------|
   | `VITE_API_URL` | `https://YOUR-RENDER-BACKEND.onrender.com/api` |
   | `VITE_WS_URL` | `wss://YOUR-RENDER-BACKEND.onrender.com/ws` |
   | `VITE_USE_LOCAL` | `false` |

   > Replace `YOUR-RENDER-BACKEND` with your actual Render service name

5. **Deploy:**
   - Click **"Deploy"**
   - Wait 3-5 minutes
   - Copy your frontend URL: `https://YOUR-APP.vercel.app`

---

### Step 3: Update CORS (5 min)

1. **Go to Render Dashboard:**
   - Open your `loopjs-backend` service
   - Click **"Environment"** tab

2. **Update ALLOWED_ORIGINS:**
   ```
   https://YOUR-APP.vercel.app,https://YOUR-BACKEND.onrender.com
   ```
   Replace with your actual URLs

3. **Save** - Render will auto-redeploy (2-3 minutes)

---

### Step 4: Test Everything (5 min)

1. **Open Frontend:**
   - Visit `https://YOUR-APP.vercel.app`
   - Should load without errors

2. **Check Backend Connection:**
   - Open browser DevTools (F12)
   - Go to Network tab
   - Try logging in
   - Should see successful API calls to `/api/auth/login`

3. **Check WebSocket:**
   - Network tab â†’ WS filter
   - Should see WebSocket connection
   - Status: Connected

---

## ðŸŽ‰ You're Done!

Your production URLs:

| Service | URL |
|---------|-----|
| **Frontend** | `https://_____________________.vercel.app` |
| **Backend** | `https://_____________________.onrender.com` |
| **Database** | `cluster0.1vs04ow.mongodb.net` |
| **Health Check** | `https://_____________________.onrender.com/health` |

---

## ðŸ“ž Need Help?

- **Full Guide:** See [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md)
- **Troubleshooting:** Check logs in Render/Vercel dashboards
- **MongoDB:** Check Atlas dashboard for connection issues

---

## ðŸ”§ Common Issues

### Backend won't start
- Check Render logs for errors
- Verify `MONGODB_URI` is set correctly in environment variables
- Test MongoDB connection from Atlas dashboard

### Frontend can't connect
- Check browser console for CORS errors
- Verify `VITE_API_URL` and `VITE_WS_URL` are correct
- Ensure `ALLOWED_ORIGINS` includes your Vercel URL

### WebSocket fails
- Must use `wss://` (not `ws://`) in production
- Check Render logs for WebSocket errors
- Verify CORS includes Vercel domain

---

**Ready to Deploy? Start with Step 1!** ðŸš€
